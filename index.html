<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; base-uri 'self'; object-src 'none'; form-action 'self'; manifest-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob:; font-src 'self' data:; connect-src 'self'; media-src 'self' blob:; worker-src 'self' blob:">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Chamada F√°cil - Scanner de Presen√ßa</title>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#4A90E2">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Chamada PRO">
    <meta name="description" content="Sistema inteligente de controle de presen√ßa via QR Code para professores">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="assets/icons/apple-touch-icon.png">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32.png">

    <!-- Styles -->
    <link rel="stylesheet" href="css/inter-local.css?v=1">
    <link rel="stylesheet" href="css/styles.css?v=5">

    <!-- Libs -->
    <script src="libs/html5-qrcode.min.js"></script>
    <script src="libs/jspdf.umd.min.js"></script>
    <script src="libs/qrcode.min.js"></script>
</head>

<body>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <img src="assets/logo1024wt.svg" alt="Chamada F√°cil" class="logo-img">
            <!-- <div class="logo">üìã</div> -->
            <h1><span style="color:#ffffff;">Chamada</span> <span style="color:#6ABF57;">F√°cil</span></h1>
            <div class="loading-spinner"></div>
            <p>Carregando...</p>
        </div>
    </div>

    <!-- Onboarding Screen -->
    <div id="onboarding-screen" class="screen" style="display: none;">
        <div class="onboarding-content">
            <div class="onboarding-header">
                <img src="assets/logo1024.svg" alt="Chamada F√°cil" class="logo-img">
                <h1>Chamada F√°cil</h1>
                <p class="subtitle">Controle de presen√ßa inteligente</p>
            </div>

            <div class="onboarding-steps">
                <div class="step">
                    <div class="step-icon"><svg class="icon-svg icon-20" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg></div>
                    <h3>Cadastre suas escolas e turmas</h3>
                </div>
                <div class="step">
                    <div class="step-icon"><svg class="icon-svg icon-20" viewBox="0 0 24 24" aria-hidden="true"><rect x="7" y="2" width="10" height="20" rx="2"/><path d="M11 18h2"/></svg></div>
                    <h3>Escaneie QR Codes dos alunos</h3>
                </div>
                <div class="step">
                    <div class="step-icon"><svg class="icon-svg icon-20" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 3v18h18"/><rect x="7" y="10" width="3" height="6"/><rect x="12" y="7" width="3" height="9"/><rect x="17" y="5" width="3" height="11"/></svg></div>
                    <h3>Exporte relat√≥rios e arquivos</h3>
                </div>
            </div>

            <div class="onboarding-profile">
                <label for="onboarding-professor-nome">Nome do professor(a) (opcional)</label>
                <input type="text" id="onboarding-professor-nome" maxlength="80" placeholder="Ex: Ana Souza" />
                <small class="text-muted">Ser√° usado para identifica√ß√£o em relat√≥rios e PDF.</small>
            </div>

            <div class="onboarding-profile">
                <label for="onboarding-escola-nome">Qual a sua escola? *</label>
                <input type="text" id="onboarding-escola-nome" maxlength="100" placeholder="Ex: Col√©gio S√£o Jos√©" />
                <small class="text-muted">Campo obrigat√≥rio para vincular suas turmas.</small>
            </div>

            <div class="onboarding-actions">
                <button class="btn btn-primary onboarding-cta" data-action="app-concluir-onboarding">
                    Come√ßar Agora
                </button>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app" class="app-container" style="display: none;">

        <!-- Header -->
        <header class="app-header">
            <button class="btn-icon btn-back" id="btn-back" style="display: none;" aria-label="Voltar">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" width="28" height="28">
                    <polyline points="15 18 9 12 15 6"/>
                </svg>
            </button>
            <div class="header-logo">
                <img src="assets/logo1024wt.svg" alt="Chamada PRO" class="logo-img">
                <div class="header-wordmark">
                    <span class="wordmark-top">Chamada</span>
                    <span class="wordmark-bottom">F√°cil</span>
                </div>
            </div>
            <h1 id="header-title">Minhas Turmas</h1>
            <button class="btn-icon btn-menu" id="btn-menu" aria-label="Menu">
                <svg class="icon-svg icon-20" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 6h16"/><path d="M4 12h16"/><path d="M4 18h16"/></svg>
            </button>
        </header>

        <!-- Tela 1: Lista de Turmas -->
        <div id="tela-turmas" class="screen active">
            <div class="turmas-header">
                <div class="stats-row">
                    <div class="stat-card" role="button" tabindex="0" data-action="turmas-abrir-gerenciar" title="Gerenciar turmas">
                        <div class="stat-icon stat-icon--turmas">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="28" height="28"><path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"/></svg>
                        </div>
                        <div class="stat-value" id="total-turmas">0</div>
                        <div class="stat-label stat-label--turmas">Turmas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon--alunos">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="28" height="28"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                        </div>
                        <div class="stat-value" id="total-alunos">0</div>
                        <div class="stat-label stat-label--alunos">Alunos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon--chamadas">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="28" height="28"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                        </div>
                        <div class="stat-value" id="total-chamadas">0</div>
                        <div class="stat-label stat-label--chamadas">Chamadas</div>
                    </div>
                </div>
            </div>

            <div class="search-controls">
                <!-- Linha 1: toggle V√°rias escolas + Gerenciar Escolas -->
                <div class="multi-escola-toggle-wrapper">
                    <label class="multi-escola-toggle" for="config-multi-escola">
                        <input type="checkbox" id="config-multi-escola">
                        <span>V√°rias escolas</span>
                    </label>
                    <div id="btn-gerenciar-escolas-container" class="multi-escola-only hidden" style="display:none;">
                        <button class="btn btn-secondary btn-sm" data-action="escolas-mostrar-gerenciar">
                            <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M3 10.5 12 4l9 6.5"/><path d="M5 10v9h14v-9"/><path d="M9 19v-5h6v5"/><path d="M9 10h.01"/><path d="M15 10h.01"/></svg></span>Gerenciar Escolas
                        </button>
                    </div>
                </div>

                <!-- Linha 2: filtro por escola (multi-escola only) -->
                <div id="filter-escola-container" class="filter-container multi-escola-only hidden" style="display: none;">
                    <label for="filter-escola"><span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M3 10.5 12 4l9 6.5"/><path d="M5 10v9h14v-9"/><path d="M9 19v-5h6v5"/><path d="M9 10h.01"/><path d="M15 10h.01"/></svg></span>Filtrar por Escola:</label>
                    <select id="filter-escola">
                        <option value="">Todas as Escolas</option>
                    </select>
                </div>

                <!-- Linha 3: bot√£o Adicionar turma centralizado -->
                <div class="adicionar-turma-wrapper" id="adicionar-turma-wrapper">
                    <button class="btn-adicionar-turma" data-action="turmas-mostrar-nova">
                        Adicionar turma
                    </button>
                </div>
            </div>

            <div id="lista-turmas" class="turmas-list">
                <!-- Turmas ser√£o inseridas aqui -->
            </div>

            <div class="empty-state" id="empty-turmas" style="display: none;">
                <div class="empty-icon"><svg class="icon-svg icon-20" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg></div>
                <h3>Nenhuma turma cadastrada</h3>
                <p>Crie sua primeira turma para come√ßar</p>
                <button class="btn btn-primary" data-action="turmas-mostrar-nova">
                    Criar primeira turma
                </button>
            </div>
        </div>

        <!-- Tela 2: Detalhes da Turma -->
        <div id="tela-turma-detalhe" class="screen">
            <div class="turma-info-card">
                <div class="turma-top-row">
                    <p id="turma-escola-detalhe" class="turma-escola-detalhe"></p>
                    <button class="btn-turma-chamada" data-action="scanner-iniciar">
                        <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M4 4h6v6H4z"/><path d="M14 4h6v6h-6z"/><path d="M4 14h6v6H4z"/><path d="M14 14h2"/><path d="M18 14h2"/><path d="M14 18h2"/><path d="M18 18h2"/></svg></span>Chamada
                    </button>
                </div>
                <h2 id="turma-nome-detalhe"></h2>
                <p id="turma-descricao-detalhe"></p>
                <div class="turma-stats">
                    <span><span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="3"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a3 3 0 0 1 0 5.75"/></svg></span><strong id="turma-total-alunos">0</strong> alunos</span>
                    <span><span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M8 2h8"/><path d="M9 2v2"/><path d="M15 2v2"/><rect x="4" y="4" width="16" height="18" rx="2"/><path d="M8 11h8"/><path d="M8 15h5"/></svg></span><strong id="turma-total-chamadas-realizadas">0</strong> chamadas</span>
                </div>
                <div class="turma-footer-row">
                    <label class="toggle-field turma-segundo-horario-toggle" for="input-detalhe-segundo-horario">
                        <span class="toggle-field-copy">
                            <span class="toggle-field-title">Segundo hor√°rio</span>
                            <small id="segundo-horario-status-detalhe" class="text-muted">Desligado (1 chamada/dia)</small>
                        </span>
                        <span class="toggle-switch">
                            <input type="checkbox" id="input-detalhe-segundo-horario"
                                data-change="turmas-segundo-horario" />
                            <span class="toggle-slider" aria-hidden="true"></span>
                        </span>
                    </label>
                    <div class="turma-actions">
                        <button class="btn btn-secondary btn-sm turma-action-btn" data-action="turmas-editar-atual">
                            Editar Turma
                        </button>
                    </div>
                </div>
            </div>

            <div class="tabs">
                <button class="tab-btn active" data-tab="alunos">Alunos</button>
                <button class="tab-btn" data-tab="historico">Di√°rio de Classe</button>
            </div>

            <!-- Tab Alunos -->
            <div id="tab-alunos" class="tab-content active">
                <div class="section-header">
                    <h3>Lista de Alunos</h3>
                    <div class="action-buttons">
                        <button class="btn btn-primary btn-sm" data-action="alunos-mostrar-novo">
                            Adicionar
                        </button>
                        <button class="btn btn-secondary btn-sm" data-action="alunos-gerar-qr-pdf">
                            <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M4 4h6v6H4z"/><path d="M14 4h6v6h-6z"/><path d="M4 14h6v6H4z"/><path d="M14 14h2"/><path d="M18 14h2"/><path d="M14 18h2"/><path d="M18 18h2"/></svg></span>QRCodes
                        </button>
                    </div>
                </div>

                <div class="importacao-alunos-card">
                    <div class="importacao-alunos-head">
                        <h4>Importacao de alunos</h4>
                        <p>Use um arquivo de planilha preenchido para cadastrar alunos em lote.</p>
                    </div>
                    <button class="btn btn-secondary btn-sm importacao-alunos-btn" data-action="alunos-importar-csv">
                        <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M12 3v12"/><path d="m7 10 5 5 5-5"/><path d="M4 21h16"/></svg></span>Importar arquivo da planilha
                    </button>
                    <div class="importacao-alunos-apoio">
                        <a href="assets/modelos/modelo_alunos.xlsx" download>Baixar modelo da planilha</a>
                        <small class="importacao-alunos-hint">Abra no Excel ou Google Sheets e nao altere os nomes das colunas.</small>
                        <small class="importacao-alunos-hint">Se o arquivo for backup da turma, use "Recuperar turma" em Gerenciar Turmas.</small>
                    </div>
                </div>
                <div class="search-box">
                    <input type="text" id="search-alunos" placeholder="Buscar aluno..." />
                </div>

                <div id="lista-alunos" class="alunos-list">
                    <!-- Alunos ser√£o inseridos aqui -->
                </div>

                <div class="empty-state" id="empty-alunos" style="display: none;">
                    <div class="empty-icon"><svg class="icon-svg icon-20" viewBox="0 0 24 24" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="3"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a3 3 0 0 1 0 5.75"/></svg></div>
                    <h3>Nenhum aluno cadastrado</h3>
                    <p>Adicione alunos manualmente ou importe um arquivo de planilha</p>
                </div>
            </div>

            <!-- Tab Hist√≥rico -->
            <div id="tab-historico" class="tab-content">

                <!-- Se√ß√£o: Di√°rio de Classe -->
                <div class="diario-classe-section">
                    <div class="section-header">
                        <h3>Di√°rio de Classe</h3>
                        <div class="relatorio-mensal-controls">
                            <label for="relatorio-mensal-mes">M√™s:</label>
                            <input type="month" id="relatorio-mensal-mes" />
                        </div>
                    </div>
                    <div id="diario-resumo-cards" class="diario-resumo-cards"></div>
                    <div class="diario-tabela-toggle">
                        <button class="btn btn-outline btn-sm" id="btn-ver-resumo" data-action="chamadas-toggle-resumo">
                            Ver resumo P/F/%
                        </button>
                        <button class="btn btn-outline btn-sm" id="btn-ver-tabela" data-action="chamadas-toggle-tabela">
                            Ver tabela completa
                        </button>
                    </div>
                    <div id="relatorio-mensal-tabela-wrap" class="relatorio-mensal-tabela-wrap" style="display: none;"></div>
                </div>

                                <!-- Se√ß√£o: Hist√≥rico de Chamadas -->
                <div class="section-header diario-historico-header">
                    <div class="action-buttons diario-historico-actions">
                        <button class="btn btn-secondary btn-sm" data-action="chamadas-exportar-historico">
                            Exportar Tudo
                        </button>
                        <button class="btn btn-secondary btn-sm" id="btn-historico-selecionar"
                            data-action="chamadas-toggle-selecao">
                            Selecionar
                        </button>
                        <button class="btn btn-secondary btn-sm" id="btn-historico-selecionar-todas"
                            data-action="chamadas-selecionar-todas" style="display: none;">
                            Selecionar Todas
                        </button>
                        <button class="btn btn-danger btn-sm" id="btn-historico-excluir-selecionadas"
                            data-action="chamadas-excluir-selecionadas" style="display: none;">
                            Excluir Selecionadas
                        </button>
                        <button class="btn btn-secondary btn-sm" id="btn-historico-cancelar-selecao"
                            data-action="chamadas-cancelar-selecao" style="display: none;">
                            Cancelar
                        </button>
                        <button class="btn btn-primary btn-sm" data-action="chamadas-abrir-relatorios">
                            <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M3 3v18h18"/><rect x="7" y="10" width="3" height="6"/><rect x="12" y="7" width="3" height="9"/><rect x="17" y="5" width="3" height="11"/></svg></span>Relat√≥rios
                        </button>
                    </div>
                    <h3>Hist√≥rico de Chamadas</h3>
                </div>

                <div id="lista-historico" class="historico-list">
                    <!-- Hist√≥rico ser√° inserido aqui -->
                </div>

                <div class="empty-state" id="empty-historico" style="display: none;">
                    <div class="empty-icon"><svg class="icon-svg icon-20" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 2h8"/><path d="M9 2v2"/><path d="M15 2v2"/><rect x="4" y="4" width="16" height="18" rx="2"/><path d="M8 11h8"/><path d="M8 15h5"/></svg></div>
                    <h3>Nenhuma chamada realizada</h3>
                    <p>Inicie uma chamada para come√ßar o hist√≥rico</p>
                </div>
            </div>

        </div>

        <!-- Tela 3: Scanner de QR Code -->
        <div id="tela-scanner" class="screen">
            <div class="scanner-info">
                <div class="chamada-info-card">
                    <h3 id="scanner-turma-nome"></h3>
                    <p id="scanner-data-hora"></p>
                    <div class="presencas-counter">
                        <span class="counter-label">Presen√ßas:</span>
                        <span class="counter-value" id="contador-presencas">0</span>
                    </div>
                </div>
            </div>

            <div class="scanner-reader-wrap">
                <div id="reader" class="qr-reader"></div>
                <div id="feedback" class="feedback"></div>
            </div>

            <div class="scanner-controls">
                <button class="btn btn-secondary" id="btn-toggle-camera">
                    <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M21 12a9 9 0 0 1-15 6.7"/><path d="M3 12a9 9 0 0 1 15-6.7"/><path d="m3 17 3 1-1 3"/><path d="m21 7-3-1 1-3"/></svg></span>Alternar
                </button>
                <button class="btn btn-warning" id="btn-torch">
                    <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M9 18h6"/><path d="M10 22h4"/><path d="M12 2a7 7 0 0 0-4 12v4h8v-4a7 7 0 0 0-4-12z"/></svg></span>Lanterna
                </button>
                <button class="btn btn-success" id="btn-finalizar-chamada">
                    <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M20 6 9 17l-5-5"/></svg></span>Finalizar
                </button>
            </div>

            <div class="presencas-live-list">
                <h4>Presen√ßas Confirmadas</h4>
                <div id="lista-presencas-live">
                    <!-- Presen√ßas aparecer√£o aqui em tempo real -->
                </div>
            </div>

            <div id="camera-status" class="camera-status">
                C√¢mera: Inativa
            </div>
        </div>

        <!-- Tela 4: Resumo da Chamada -->
        <div id="tela-resumo" class="screen">
            <div class="resumo-header">
                <div class="resumo-icon">‚úì</div>
                <h2>Chamada Finalizada!</h2>
                <p id="resumo-info"></p>
            </div>

            <div class="resumo-stats">
                <div class="stat-large">
                    <div class="stat-value" id="resumo-presentes">0</div>
                    <div class="stat-label">Presentes</div>
                </div>
                <div class="stat-large">
                    <div class="stat-value" id="resumo-ausentes">0</div>
                    <div class="stat-label">Ausentes</div>
                </div>
                <div class="stat-large">
                    <div class="stat-value" id="resumo-percentual">0%</div>
                    <div class="stat-label">Frequ√™ncia</div>
                </div>
            </div>

            <div class="resumo-lista">
                <h3>Presentes</h3>
                <div id="resumo-lista-presentes"></div>

                <h3>Ausentes</h3>
                <div id="resumo-lista-ausentes"></div>
            </div>

            <div class="resumo-actions">
                <button class="btn btn-secondary btn-large" data-action="chamadas-compartilhar">
                    <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><path d="M8.6 13.5 15.4 17.5"/><path d="M15.4 6.5 8.6 10.5"/></svg></span>Compartilhar
                </button>
                <button class="btn btn-primary btn-large" data-action="chamadas-exportar-csv">
                    <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M12 3v12"/><path d="m7 10 5 5 5-5"/><path d="M4 21h16"/></svg></span>Baixar CSV
                </button>
                <button class="btn btn-success btn-large" data-action="app-voltar-para-turma">
                    ‚úì Concluir
                </button>
            </div>
        </div>

        <!-- Tela 5: Configura√ß√µes -->
        <div id="tela-config" class="screen">
            <div class="config-section">
                <h3>Prefer√™ncias</h3>

                <div class="config-item">
                    <label>
                        <input type="checkbox" id="config-som" checked>
                        <span>Som de confirma√ß√£o</span>
                    </label>
                </div>


                <div class="config-item">
                    <label>
                        <input type="checkbox" id="config-vibracao" checked>
                        <span>Vibra√ß√£o</span>
                    </label>
                </div>

                <div class="config-item">
                    <label>
                        <input type="checkbox" id="config-wake-lock" checked>
                        <span>Manter tela ligada durante escaneamento</span>
                    </label>
                </div>

            </div>

            <div class="config-section">
                <h3>Perfil do Professor</h3>

                <div class="form-group" style="margin-bottom: 12px;">
                    <label for="config-professor-nome">Nome do professor(a)</label>
                    <input type="text" id="config-professor-nome" maxlength="80" placeholder="N√£o informado" />
                    <small class="text-muted">Usado para identifica√ß√£o em relat√≥rios/PDF.</small>
                </div>

                <div class="config-profile-actions">
                    <button class="btn btn-primary" data-action="app-salvar-professor">
                        Salvar Nome
                    </button>
                    <button class="btn btn-secondary" data-action="app-remover-professor">
                        Remover Nome
                    </button>
                </div>
            </div>

            <div class="config-section">
                <h3>Backup do aplicativo</h3>

                <button class="btn btn-secondary btn-block" data-action="app-exportar-backup">
                    <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M3 8.5 12 4l9 4.5-9 4.5-9-4.5Z"/><path d="M3 8.5V16l9 4 9-4V8.5"/><path d="M12 13v7"/></svg></span>Exportar Backup do aplicativo
                </button>

                <button class="btn btn-secondary btn-block" data-action="app-importar-backup">
                    <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M12 21V9"/><path d="m17 14-5-5-5 5"/><path d="M4 3h16"/></svg></span>Importar Backup do aplicativo
                </button>

                <button class="btn btn-danger btn-block" data-action="app-limpar-dados">
                    <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M3 6h18"/><path d="M8 6V4h8v2"/><path d="M19 6l-1 14H6L5 6"/><path d="M10 11v6"/><path d="M14 11v6"/></svg></span>Limpar Todos os Dados
                </button>
            </div>

        </div>

    </div>

    <!-- Modal: Nova Turma -->
    <div id="modal-nova-turma" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nova Turma</h3>
                <button class="btn-close" data-action="close-modal" data-modal-id="modal-nova-turma">√ó</button>
            </div>
            <div class="modal-body">
                <!-- MULTI ESCOLA: exibido somente quando config.multi_escola === true -->
                <div class="form-group multi-escola-only hidden">
                    <label>Escola</label>
                    <select id="input-turma-escola">
                        <option value="">Selecione uma escola...</option>
                    </select>
                </div>
                <!-- MULTI ESCOLA -->

                <div class="form-group">
                    <label>Nome da Turma *</label>
                    <input type="text" id="input-turma-nome" placeholder="Ex: 3¬∫ Ano A - Matem√°tica" />
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <textarea id="input-turma-descricao" placeholder="Informa√ß√µes adicionais (opcional)"
                        rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="toggle-field" for="input-turma-segundo-horario">
                        <span class="toggle-field-copy">
                            <span class="toggle-field-title">Segundo hor√°rio?</span>
                            <small class="text-muted">Ative apenas se a turma costuma ter duas chamadas no mesmo dia.</small>
                        </span>
                        <span class="toggle-switch">
                            <input type="checkbox" id="input-turma-segundo-horario" />
                            <span class="toggle-slider" aria-hidden="true"></span>
                        </span>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-action="close-modal" data-modal-id="modal-nova-turma">Cancelar</button>
                <button class="btn btn-primary" data-action="turmas-salvar-nova">Criar Turma</button>
            </div>
        </div>
    </div>

    <!-- Modal: Editar Turma -->
    <div id="modal-editar-turma" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Editar Turma</h3>
                <button class="btn-close" data-action="close-modal" data-modal-id="modal-editar-turma">√ó</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="input-editar-turma-id">

                <div class="form-group">
                    <label>Nome da Turma *</label>
                    <input type="text" id="input-editar-turma-nome" placeholder="Ex: 3¬∫ Ano A - Matem√°tica" />
                </div>

                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <textarea id="input-editar-turma-descricao" placeholder="Informa√ß√µes adicionais (opcional)"
                        rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label>Escola *</label>
                    <select id="input-editar-turma-escola">
                        <option value="">Selecione uma escola...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="toggle-field" for="input-editar-turma-segundo-horario">
                        <span class="toggle-field-copy">
                            <span class="toggle-field-title">Segundo hor√°rio?</span>
                            <small class="text-muted">Ative apenas se a turma costuma ter duas chamadas no mesmo dia.</small>
                        </span>
                        <span class="toggle-switch">
                            <input type="checkbox" id="input-editar-turma-segundo-horario" />
                            <span class="toggle-slider" aria-hidden="true"></span>
                        </span>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-action="close-modal" data-modal-id="modal-editar-turma">Cancelar</button>
                <button class="btn btn-primary" data-action="turmas-salvar-edicao">Salvar Altera√ß√µes</button>
            </div>
        </div>
    </div>

    <!-- Modal: Gerenciar Turmas -->
    <div id="modal-gerenciar-turmas" class="modal">
        <div class="modal-content modal-gerenciar-turmas-content">
            <div class="modal-header">
                <h3>Gerenciar Turmas</h3>
                <button class="btn-close" data-action="close-modal" data-modal-id="modal-gerenciar-turmas">√ó</button>
            </div>
            <div class="modal-body">
                <div class="gerenciar-turmas-actions">
                    <button class="btn btn-secondary btn-sm" data-action="turmas-recuperar-backup-global">
                        Recuperar turma
                    </button>
                    <button class="btn btn-secondary btn-sm" data-action="turmas-toggle-selecao-gerenciar">
                        Selecionar
                    </button>
                    <button class="btn btn-secondary btn-sm" id="btn-gerenciar-turmas-selecionar-todas"
                        data-action="turmas-selecionar-todas-gerenciar" style="display: none;">
                        Selecionar Todas
                    </button>
                    <button class="btn btn-danger btn-sm" id="btn-gerenciar-turmas-excluir-selecionadas"
                        data-action="turmas-excluir-selecionadas-gerenciar" style="display: none;">
                        Excluir Selecionadas
                    </button>
                    <button class="btn btn-secondary btn-sm" id="btn-gerenciar-turmas-cancelar-selecao"
                        data-action="turmas-cancelar-selecao-gerenciar" style="display: none;">
                        Cancelar
                    </button>
                </div>
                <div class="gerenciar-qrcodes-card">
                    <div class="gerenciar-qrcodes-head">
                        <h4>Compartilhamento de QRCodes</h4>
                        <p>Use para compartilhar os alunos de uma turma com outro professor, mantendo os mesmos QRCodes.</p>
                    </div>
                    <button class="btn btn-secondary btn-sm" data-action="turmas-importar-migracao-global">
                        Receber QRCodes
                    </button>
                </div>
                <div id="lista-gerenciar-turmas" class="gerenciar-turmas-list"></div>
                <div id="empty-gerenciar-turmas" class="empty-state" style="display:none; padding: 20px;">
                    <h3>Nenhuma turma cadastrada</h3>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Novo Aluno -->
    <div id="modal-novo-aluno" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-aluno-titulo">Novo Aluno</h3>
                <button class="btn-close"
                    data-action="alunos-cancelar-modal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group center-content" style="text-align: center; margin-bottom: 20px;">
                    <div id="aluno-foto-preview" class="avatar-placeholder"
                        data-action="alunos-escolher-fonte-foto">
                        <span id="foto-placeholder-icon" style="font-size: 24px;"><svg class="icon-svg icon-20" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 7h3V4"/><path d="M20 7h-3V4"/><path d="M4 17h3v3"/><path d="M20 17h-3v3"/><rect x="6" y="7" width="12" height="10" rx="2"/></svg></span>
                        <span id="foto-placeholder-text"
                            style="font-size: 12px; display: block; margin-top: 4px; color: var(--primary);">Adicionar
                            Foto</span>
                    </div>
                    <input type="file" id="input-aluno-foto" accept="image/*"
                        style="display: none;" data-change="alunos-processar-foto">
                </div>
                <div class="form-group" style="text-align: center; margin-bottom: 20px;">
                    <button type="button" class="btn btn-secondary" data-action="alunos-ler-qr-existente">
                        <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M4 4h6v6H4z"/><path d="M14 4h6v6h-6z"/><path d="M4 14h6v6H4z"/><path d="M14 14h2"/><path d="M18 14h2"/><path d="M14 18h2"/><path d="M18 18h2"/></svg></span>Ler QR Existente
                    </button>
                    <br>
                    <small class="text-muted">Importar dados de um QR Code j√° cadastrado</small>
                </div>
                <div class="form-group">
                    <label>Nome Completo *</label>
                    <input type="text" id="input-aluno-nome" placeholder="Ex: Maria da Silva" />
                </div>
                <div class="form-group">
                    <label>Matr√≠cula / ID *</label>
                    <input type="text" id="input-aluno-matricula" placeholder="Ex: 2024001" />
                </div>

                <div id="aluno-pontos-section" class="aluno-pontos-section" style="display: none;">
                    <div class="aluno-pontos-header">
                        <h4><span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M12 3v18"/><path d="M7 8h6a3 3 0 0 1 0 6H9a3 3 0 0 0 0 6h8"/></svg></span>Pontua√ß√£o do aluno</h4>
                        <div class="aluno-pontos-header-actions">
                            <button type="button" class="btn btn-secondary btn-sm" data-action="alunos-abrir-evento-ponto">
                                Adicionar Ponto
                            </button>
                            <span id="aluno-pontos-total" class="aluno-pontos-total">Total de pontos: 0</span>
                        </div>
                    </div>
                    <div id="lista-eventos-pontos" class="lista-eventos-pontos">
                        <p class="text-muted">Nenhum ponto registrado</p>
                    </div>
                </div>

                <div class="form-group">
                    <div class="obs-label-row">
                        <label for="input-aluno-obs"><span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M12 20h9"/><path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/></svg></span>Observa√ß√µes</label>
                        <button type="button" id="btn-obs-visibilidade" class="btn-obs-eye"
                            data-action="alunos-toggle-obs"
                            title="Ocultar/exibir esta observa√ß√£o do aluno">
                            <svg id="obs-eye-open" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                            <svg id="obs-eye-closed" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20" style="display:none;">
                                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
                                <line x1="1" y1="1" x2="23" y2="23"/>
                            </svg>
                        </button>
                    </div>
                    <small id="obs-oculta-hint" class="obs-oculta-hint" style="display:none;"><span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><rect x="5" y="11" width="14" height="10" rx="2"/><path d="M8 11V8a4 4 0 0 1 8 0v3"/></svg></span>Observa√ß√£o marcada como privada e n√£o aparece em relat√≥rios para alunos</small>
                    <textarea id="input-aluno-obs" rows="2" placeholder="Anota√ß√µes sobre o aluno"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary"
                    data-action="alunos-cancelar-modal">Cancelar</button>
                <button class="btn btn-primary" id="btn-salvar-aluno" data-action="alunos-salvar">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Fonte da Foto -->
    <div id="modal-fonte-foto" class="modal"
        data-overlay-close="modal-fonte-foto">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Adicionar Foto</h3>
                <button class="btn-close" data-action="close-modal" data-modal-id="modal-fonte-foto">√ó</button>
            </div>
            <div class="modal-body">
                <p class="text-muted" style="margin-bottom: 12px;">Como deseja adicionar a foto do aluno?</p>
                <div class="action-buttons" style="display: flex; gap: 8px; flex-wrap: wrap;">
                    <button type="button" class="btn btn-primary" data-action="alunos-foto-camera">
                        <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M4 7h3V4"/><path d="M20 7h-3V4"/><path d="M4 17h3v3"/><path d="M20 17h-3v3"/><rect x="6" y="7" width="12" height="10" rx="2"/></svg></span>Tirar Foto
                    </button>
                    <button type="button" class="btn btn-secondary" data-action="alunos-foto-dispositivo">
                        <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="m21 15-5-5L5 21"/></svg></span>Escolher do Dispositivo
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-action="close-modal" data-modal-id="modal-fonte-foto">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Evento de Ponto -->
    <div id="modal-evento-ponto" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-evento-ponto-titulo">Adicionar Ponto</h3>
                <button class="btn-close" data-action="close-modal" data-modal-id="modal-evento-ponto">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="input-evento-ponto-valor">Valor *</label>
                    <input type="number" id="input-evento-ponto-valor" min="0.1" step="0.1" placeholder="Ex: 5" />
                </div>
                <div class="form-group">
                    <label for="input-evento-ponto-descricao">Descri√ß√£o *</label>
                    <textarea id="input-evento-ponto-descricao" rows="3" placeholder="Ex: Trabalho em grupo"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-action="close-modal" data-modal-id="modal-evento-ponto">Cancelar</button>
                <button class="btn btn-primary" data-action="alunos-salvar-evento-ponto">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Menu -->
    <div id="modal-menu" class="modal modal-menu">
        <div class="modal-content modal-menu-content">
            <div class="modal-header">
                <h3>Menu</h3>
                <button class="btn-close" data-action="close-modal" data-modal-id="modal-menu">√ó</button>
            </div>
            <div class="modal-body">
                <button class="menu-item" data-action="menu-ir-turmas">
                    <span class="menu-icon" aria-hidden="true">
                        <svg class="icon-svg icon-20" viewBox="0 0 24 24"><path d="M3 10.5 12 3l9 7.5"/><path d="M5 9.5V21h14V9.5"/><path d="M10 21v-6h4v6"/></svg>
                    </span>
                    <span>Home</span>
                </button>
                <button class="menu-item" data-action="menu-ir-config">
                    <span class="menu-icon" aria-hidden="true">
                        <svg class="icon-svg icon-20" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.7 1.7 0 0 0 .34 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06A1.7 1.7 0 0 0 15 19.4a1.7 1.7 0 0 0-1 .6 1.7 1.7 0 0 0-.4 1.08V21a2 2 0 0 1-4 0v-.09a1.7 1.7 0 0 0-.4-1.08 1.7 1.7 0 0 0-1-.6 1.7 1.7 0 0 0-1.82.34l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.7 1.7 0 0 0 4.6 15a1.7 1.7 0 0 0-.6-1 1.7 1.7 0 0 0-1.08-.4H2.9a2 2 0 0 1 0-4H3a1.7 1.7 0 0 0 1.08-.4 1.7 1.7 0 0 0 .6-1 1.7 1.7 0 0 0-.34-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.7 1.7 0 0 0 9 4.6a1.7 1.7 0 0 0 1-.6A1.7 1.7 0 0 0 10.4 2.9V2.9a2 2 0 0 1 4 0V3a1.7 1.7 0 0 0 .4 1.08 1.7 1.7 0 0 0 1 .6 1.7 1.7 0 0 0 1.82-.34l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.7 1.7 0 0 0 19.4 9c0 .38.14.74.4 1a1.7 1.7 0 0 0 1.08.4h.09a2 2 0 0 1 0 4h-.09a1.7 1.7 0 0 0-1.08.4 1.7 1.7 0 0 0-.4 1Z"/></svg>
                    </span>
                    <span>Configura√ß√µes</span>
                </button>
                <button class="menu-item" data-action="app-abrir-sobre">
                    <span class="menu-icon" aria-hidden="true">
                        <svg class="icon-svg icon-20" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15 15 0 0 1 4 10 15 15 0 0 1-4 10 15 15 0 0 1-4-10 15 15 0 0 1 4-10Z"/></svg>
                    </span>
                    <span>Sobre o Chamada F√°cil</span>
                </button>
                <button class="menu-item" data-action="menu-abrir-ajuda">
                    <span class="menu-icon" aria-hidden="true">
                        <svg class="icon-svg icon-20" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M9.1 9a3 3 0 1 1 5.4 1.8c-.7.9-1.5 1.3-1.9 2.2-.1.2-.1.5-.1 1"/><path d="M12 17h.01"/></svg>
                    </span>
                    <span>Ajuda</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal: Gerenciar Escolas -->
    <div id="modal-gerenciar-escolas" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-20" viewBox="0 0 24 24"><path d="M3 10.5 12 4l9 6.5"/><path d="M5 10v9h14v-9"/><path d="M9 19v-5h6v5"/><path d="M9 10h.01"/><path d="M15 10h.01"/></svg></span>Gerenciar Escolas</h3>
                <button class="btn-close" data-action="close-modal" data-modal-id="modal-gerenciar-escolas">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Nome da Escola *</label>
                    <div style="display: flex; gap: 8px;">
                        <input type="text" id="input-nova-escola" placeholder="Ex: Col√©gio S√£o Jos√©" style="flex: 1;" />
                        <button class="btn btn-primary" data-action="escolas-adicionar">
                            Adicionar
                        </button>
                    </div>
                </div>
                <div class="form-group" style="margin-top: 12px;">
                    <label>Logo da Escola (opcional)</label>
                    <div class="escola-foto-add-row">
                        <div id="escola-foto-preview-nova" class="escola-foto-preview-mini" data-action="escolas-click-foto-nova" title="Clique para adicionar logo">
                            <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-20" viewBox="0 0 24 24"><path d="M3 10.5 12 4l9 6.5"/><path d="M5 10v9h14v-9"/><path d="M9 19v-5h6v5"/><path d="M9 10h.01"/><path d="M15 10h.01"/></svg></span>
                        </div>
                        <div>
                            <button type="button" class="btn btn-secondary btn-sm" data-action="escolas-click-foto-nova">
                                <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M4 7h3V4"/><path d="M20 7h-3V4"/><path d="M4 17h3v3"/><path d="M20 17h-3v3"/><rect x="6" y="7" width="12" height="10" rx="2"/></svg></span>Selecionar Logo
                            </button>
                            <button type="button" class="btn btn-secondary btn-sm" id="btn-remover-foto-nova-escola" style="display:none;" data-action="escolas-remover-foto-nova">
                                Remover
                            </button>
                            <br><small class="text-muted">Ser√° usada nos relat√≥rios em PDF.</small>
                        </div>
                    </div>
                    <input type="file" id="input-escola-foto-nova" accept="image/*" style="display:none;"
                        data-change="escolas-processar-foto-nova">
                </div>

                <h4 style="margin-top: 24px; margin-bottom: 12px;">Escolas Cadastradas</h4>
                <div id="lista-escolas-gerenciar" class="escolas-list">
                    <!-- Escolas ser√£o inseridas aqui -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Editar Escola -->
    <div id="modal-editar-escola" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Editar Escola</h3>
                <button class="btn-close" data-action="close-modal" data-modal-id="modal-editar-escola">√ó</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="input-editar-escola-id">
                <div class="form-group">
                    <label>Nome da Escola *</label>
                    <input type="text" id="input-editar-escola-nome" placeholder="Nome da escola" />
                </div>
                <div class="form-group" style="margin-top: 12px;">
                    <label>Logo da Escola (opcional)</label>
                    <div class="escola-foto-add-row">
                        <div id="escola-foto-preview-editar" class="escola-foto-preview-mini" data-action="escolas-click-foto-editar" title="Clique para alterar logo">
                            <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-20" viewBox="0 0 24 24"><path d="M3 10.5 12 4l9 6.5"/><path d="M5 10v9h14v-9"/><path d="M9 19v-5h6v5"/><path d="M9 10h.01"/><path d="M15 10h.01"/></svg></span>
                        </div>
                        <div>
                            <button type="button" class="btn btn-secondary btn-sm" data-action="escolas-click-foto-editar">
                                <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M4 7h3V4"/><path d="M20 7h-3V4"/><path d="M4 17h3v3"/><path d="M20 17h-3v3"/><rect x="6" y="7" width="12" height="10" rx="2"/></svg></span>Alterar Logo
                            </button>
                            <button type="button" class="btn btn-secondary btn-sm" id="btn-remover-foto-editar-escola" style="display:none;" data-action="escolas-remover-foto-editar">
                                Remover
                            </button>
                        </div>
                    </div>
                    <input type="file" id="input-escola-foto-editar" accept="image/*" style="display:none;"
                        data-change="escolas-processar-foto-editar">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-action="close-modal" data-modal-id="modal-editar-escola">Cancelar</button>
                <button class="btn btn-primary" data-action="escolas-salvar-edicao">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Sobre -->
    <div id="modal-sobre" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Sobre o Chamada F√°cil</h3>
                <button class="btn-close" data-action="close-modal" data-modal-id="modal-sobre">√ó</button>
            </div>
            <div class="modal-body">
                <p><strong>Chamada F√°cil</strong></p>
                <p>Sistema de chamada escolar com QR Code, focado em agilidade para professores.</p>

                <p style="margin-top: 12px;">
                    Vers√£o: <strong data-app-version>v0.0.0-dev</strong><br>
                </p>

                <p style="margin-top: 12px;">
                    <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><rect x="3" y="5" width="18" height="14" rx="2"/><path d="m3 7 9 6 9-6"/></svg></span>E-mail:
                    <a href="mailto:contato@chamadafacil.net.br">
                        contato@chamadafacil.net.br
                    </a>
                </p>
                <p style="margin-top: 12px;">
                    ¬© 2026 - Todos os direitos reservados
                </p>
                <div style="margin-top: 24px; text-align: center;">
                    <a href="https://www.chamadafacil.net.br" target="_blank" rel="noopener noreferrer" class="btn btn-primary"
                        style="text-decoration: none; display: inline-block;">
                        <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15 15 0 0 1 4 10 15 15 0 0 1-4 10 15 15 0 0 1-4-10 15 15 0 0 1 4-10Z"/></svg></span>Site Oficial
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Relat√≥rios -->
    <div id="modal-relatorios" class="modal">
        <div class="modal-content modal-relatorios-content">
            <div class="modal-header">
                <h3><span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-20" viewBox="0 0 24 24"><path d="M3 3v18h18"/><rect x="7" y="10" width="3" height="6"/><rect x="12" y="7" width="3" height="9"/><rect x="17" y="5" width="3" height="11"/></svg></span>Relat√≥rios</h3>
                <button class="btn-close" data-action="close-modal" data-modal-id="modal-relatorios">√ó</button>
            </div>
            <div class="modal-body">
                <div class="relatorio-secao">
                    <h4 class="relatorio-secao-titulo"><span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M8 2h8"/><path d="M9 2v2"/><path d="M15 2v2"/><rect x="4" y="4" width="16" height="18" rx="2"/><path d="M8 11h8"/><path d="M8 15h5"/></svg></span>Relat√≥rio Mensal de Chamadas</h4>
                    <p class="text-muted" style="font-size: 13px; margin-bottom: 10px;">
                        Exporta a tabela de presen√ßa/falta do m√™s selecionado no Di√°rio de Classe.
                    </p>
                    <div class="relatorio-secao-acoes">
                        <button class="btn btn-secondary btn-sm" data-action="chamadas-exportar-relatorio-csv">
                            <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/><path d="M8 13h8"/><path d="M8 17h5"/></svg></span>Exportar Plan
                        </button>
                        <button class="btn btn-secondary btn-sm" data-action="chamadas-exportar-relatorio-pdf">
                            <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M6 9V4h12v5"/><rect x="4" y="9" width="16" height="7" rx="2"/><path d="M6 16h12v4H6z"/></svg></span>Exportar PDF
                        </button>
                    </div>
                </div>

                <hr style="margin: 20px 0; border-color: var(--border);">

                <div class="relatorio-secao">
                    <h4 class="relatorio-secao-titulo"><span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M12 3v18"/><path d="M7 8h6a3 3 0 0 1 0 6H9a3 3 0 0 0 0 6h8"/></svg></span>Pontua√ß√£o</h4>
                    <p class="text-muted" style="font-size: 13px; margin-bottom: 10px;">
                        Totaliza√ß√£o da pontua√ß√£o por aluno no m√™s selecionado no Di√°rio de Classe.
                    </p>
                    <div class="relatorio-secao-acoes">
                        <button class="btn btn-secondary btn-sm" data-action="chamadas-gerar-pontos-pdf">
                            <span class="icon-inline" aria-hidden="true"><svg class="icon-svg icon-16" viewBox="0 0 24 24"><path d="M6 9V4h12v5"/><rect x="4" y="9" width="16" height="7" rx="2"/><path d="M6 16h12v4H6z"/></svg></span>Gerar PDF de Pontos
                        </button>
                    </div>
                    <div id="relatorio-pontos-preview" class="relatorio-pontos-preview" style="margin-top: 12px;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scanner Overlay para Cadastro (Fix Android) -->
    <div id="qr-scan-overlay"
        style="position: fixed; inset: 0; background: #000; z-index: 9999; display: none; flex-direction: column;">
        <div id="reader-temp" style="flex:1;"></div>
        <button type="button" data-action="scanner-fechar-overlay"
            style="padding:16px; font-size:18px; background:#fff; border:none; cursor:pointer;">
            Fechar
        </button>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="js/utils.js?v=4"></script>
    <script src="js/db.js?v=4"></script>
    <script src="js/config-defaults.js?v=4"></script>
    <script src="js/app-version.js?v=1"></script>
    <script src="js/escolas.js?v=4"></script>
    <script src="js/turmas.js?v=4"></script>
    <script src="js/alunos.js?v=4"></script>
    <script src="js/chamadas.js?v=5"></script>
    <script src="js/scanner.js?v=4"></script>
    <script src="js/export.js?v=5"></script>
    <script src="js/qrgen.js?v=4"></script>

    <script src="js/app.js?v=5"></script>

</body>

</html>














